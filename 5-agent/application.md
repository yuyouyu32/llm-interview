# Agent applications
> 此章节记录Agent应用过程中的面试QA。


### Q. 假如一个 Agent 推理链路包含 3 个工具 + 高频请求，系统整体延迟较高，你会如何优化？
> **Company**: 淘天 | **Round**: 算法工程师 一面 ｜ **Date**: 2025-08-26 ｜ **Tags**: [Agent, 系统设计, 延迟优化]

- **并行化工具**：把无依赖的 3 个工具改为并行调用，用 DAG 执行有依赖部分，给每个工具设 **超时 + 降级**。  
- **少调工具**：加 **工具路由**（小模型/规则），只调用最必要的工具；高频中间结果做 **缓存**（Query/Doc/Embedding）。  
- **模型侧加速**：规划/调用用 **小模型**，最终答复再用大模型；启用 **KV Cache / 动态批处理 / 流式输出**，必要时用 **speculative decoding**。  
- **检索与数据**：缩小 **topK/窗口**、支持 **批处理**，数据 **就近副本/连接复用**（HTTP/2、keep-alive）。  
- **Prompt 压缩**：精简系统提示与历史，控制 **max_tokens**，减少无效 token。  
- **观测与治理**：全链路 **trace**，盯 **p95/p99**；限流 + 背压 + 预热，避免高并发抖动。

<mark>核心：串行改并行，重任务用小模型&缓存，服务侧批处理+KV缓存+流式，配合超时降级与限流，端到端看 p99。</mark>

### Q. 用户理解阶段一般会做哪些处理？有何作用？可以做哪些优化？
> **Company**: 阿里 | **Round**: 算法工程师 一面 ｜ **Date**: 2025-08-14 ｜ **Tags**: [Agent, 用户理解, 语义解析]

- **常见处理**：  
  - **意图识别**：确定用户目标任务。  
  - **槽位填充/实体识别**：抽取关键信息（时间、地点、商品等）。  
  - **上下文建模**：利用历史对话、用户画像、外部知识补充信息。  
  - **歧义消解**：澄清模糊表达，生成候选。  
  - **规范化/结构化**：统一格式（日期、金额、地名）→ 系统可执行输入。  

- **作用**：  
  - **保证准确性**：减少误解和错误调用。  
  - **降低交互成本**：减少用户重复说明。  
  - **提升鲁棒性**：适应模糊、口语化输入。  
  - **支撑下游任务**：为检索、推荐、执行提供干净输入。

- **优化方向**：  
  - **知识增强**：结合知识库 / RAG / 多模态信息。  
  - **分层意图建模**：粗到细，降低分类难度。  
  - **动态槽位填充**：上下文继承或推理补全。  
  - **个性化解析**：基于用户偏好做差异化理解。  
  - **LLM+小模型结合**：大模型做复杂解析，小模型/规则做校验。  
  - **可解释与反馈**：展示候选意图和槽位，减少误解。  

<mark>核心：用户理解阶段 = “自然语言 → 可执行语义”。常见处理是意图+槽位+上下文+规范化；作用是提升准确性和交互体验；优化可通过知识增强、上下文推理、个性化和 LLM 融合来实现。</mark>
